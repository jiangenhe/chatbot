(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(34)},27:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),o=n.n(i),s=(n(27),n(4)),u=n(3),c=n(6),l=n(5),p=n(7),d=(n(28),n(19)),f=n(15),g=n.n(f),h=n(2),v=n(1),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(e);return"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(t,")")};function m(){var e=Object(h.a)(["\n  0% { box-shadow: 0 0 0 0 ","; }\n  70% { box-shadow: 0 0 0 10px ","; }\n  100% { box-shadow: 0 0 0 0 ","; }\n"]);return m=function(){return e},e}function y(){var e=Object(h.a)(["\n  25% { transform: rotate(-1deg); }\n  100% { transform: rotate(1deg); }\n"]);return y=function(){return e},e}function S(){var e=Object(h.a)(["\n  100% { transform: scale(1); }\n"]);return S=function(){return e},e}function x(){var e=Object(h.a)(["\n  0% { opacity: .2; }\n  20% { opacity: 1; }\n  100% { opacity: .2; }\n"]);return x=function(){return e},e}var k=Object(v.keyframes)(x()),w=Object(v.keyframes)(S()),O=Object(v.keyframes)(y());function j(){var e=Object(h.a)(["\n  animation: "," 1.4s infinite both;\n  animation-delay: ",";\n"]);return j=function(){return e},e}var E=v.default.span(j(),k,function(e){return e.delay}),N=function(){return a.a.createElement("span",{className:"rsc-loading"},a.a.createElement(E,{delay:"0s"},"."),a.a.createElement(E,{delay:".2s"},"."),a.a.createElement(E,{delay:".4s"},"."))};function I(){var e=Object(h.a)(["\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  display: flex;\n  justify-content: center;\n  margin: 0 6px 10px 6px;\n  padding: 16px;\n"]);return I=function(){return e},e}var C=v.default.div(I()),M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!0},n.renderComponent=function(){var e=n.props,t=e.step,r=e.steps,i=e.previousStep,o=e.triggerNextStep,s=t.component;return a.a.cloneElement(s,{step:t,steps:r,previousStep:i,triggerNextStep:o})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.speak,r=t.step,a=t.previousValue,i=t.triggerNextStep,o=r.delay,s=r.waitAction;setTimeout(function(){e.setState({loading:!1},function(){s||r.rendered||i(),n(r,a)})},o)}},{key:"render",value:function(){var e=this.state.loading,t=this.props.style;return a.a.createElement(C,{className:"rsc-cs",style:t},e?a.a.createElement(N,null):this.renderComponent())}}]),t}(r.Component);M.defaultProps={previousValue:"",speak:function(){}};var q=M;function B(){var e=Object(h.a)(["\n  animation: "," 0.3s ease forwards;\n  cursor: pointer;\n  display: inline-block;\n  margin: 2px;\n  transform: scale(0);\n"]);return B=function(){return e},e}var A=v.default.li(B(),w),z={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"};function V(){var e=Object(h.a)(["\n  background: ",";\n  border: 0;\n  border-radius: 22px;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  padding: 12px;\n\n  &:hover {\n    opacity: 0.7;\n  }\n  &:active,\n  &:hover:focus {\n    outline:none;\n  }\n"]);return V=function(){return e},e}var F=v.default.button(V(),function(e){return e.theme.botBubbleColor},function(e){return e.theme.botFontColor});F.defaultProps={theme:z};var P=F;function R(){var e=Object(h.a)(["\n  margin: 2px 0 12px 0;\n  padding: 0 6px;\n"]);return R=function(){return e},e}var T=v.default.ul(R());function D(){var e=Object(h.a)([""]);return D=function(){return e},e}var L=v.default.div(D()),U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).onOptionClick=function(e){var t=e.value;(0,n.props.triggerNextStep)({value:t})},n.renderOption=function(e){var t=n.props,r=t.bubbleOptionStyle,i=t.step.user,o=e.value,s=e.label;return a.a.createElement(A,{key:o,className:"rsc-os-option"},a.a.createElement(P,{className:"rsc-os-option-element",style:r,user:i,onClick:function(){return n.onOptionClick({value:o})}},s))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.step.options;return a.a.createElement(L,{className:"rsc-os"},a.a.createElement(T,{className:"rsc-os-options"},Object.keys(e).map(function(t){return e[t]}).map(this.renderOption)))}}]),t}(r.Component);function H(){var e=Object(h.a)(["\n  animation: "," 0.3s ease forwards;\n  background: ",";\n  border-radius: ",";\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  max-width: 50%;\n  margin: ",";\n  overflow: hidden;\n  position: relative;\n  padding: 12px;\n  transform: scale(0);\n  transform-origin: ",";\n"]);return H=function(){return e},e}var _=v.default.div(H(),w,function(e){return e.user?e.theme.userBubbleColor:e.theme.botBubbleColor},function(e){var t=e.isFirst,n=e.isLast,r=e.user;return t||n?!t&&n?r?"18px 0 18px 18px":"0 18px 18px 18px":e.user?"18px 18px 0 18px":"18px 18px 18px 0":r?"18px 0 0 18px":"0 18px 18px 0px"},function(e){return e.user?e.theme.userFontColor:e.theme.botFontColor},function(e){var t=e.isFirst,n=e.showAvatar,r=e.user;return!t&&n?r?"-8px 46px 10px 0":"-8px 0 10px 46px":t||n?"0 0 10px 0":r?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(e){var t=e.isFirst,n=e.user;return t?n?"bottom right":"bottom left":n?"top right":"top left"});_.defaultProps={theme:z};var W=_;function K(){var e=Object(h.a)(["\n  animation: "," 0.3s ease forwards;\n  border-radius: ",";\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  height: 40px;\n  min-width: 40px;\n  padding: 3px;\n  transform: scale(0);\n  transform-origin: ",";\n  width: 40;\n"]);return K=function(){return e},e}var $=v.default.img(K(),w,function(e){return e.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(e){return e.user?"bottom left":"bottom right"});function J(){var e=Object(h.a)(["\n  display: inline-block;\n  order: ",";\n  padding: 6px;\n"]);return J=function(){return e},e}var G=v.default.div(J(),function(e){return e.user?"1":"0"});function Q(){var e=Object(h.a)(["\n  align-items: flex-end;\n  display: flex;\n  justify-content: ",";\n"]);return Q=function(){return e},e}var X=v.default.div(Q(),function(e){return e.user?"flex-end":"flex-start"}),Y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!0},n.getMessage=function(){var e=n.props,t=e.previousValue,r=e.step.message;return r?r.replace(/{previousValue}/g,t):""},n.renderMessage=function(){var e=n.props,t=e.step,r=e.steps,i=e.previousStep,o=e.triggerNextStep,s=t.component;return s?a.a.cloneElement(s,{step:t,steps:r,previousStep:i,triggerNextStep:o}):n.getMessage()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.step,r=t.speak,a=t.previousValue,i=t.triggerNextStep,o=n.component,s=n.delay,u=n.waitAction,c=o&&u;setTimeout(function(){e.setState({loading:!1},function(){c||n.rendered||i(),r(n,a)})},s)}},{key:"render",value:function(){var e=this.props,t=e.step,n=e.isFirst,r=e.isLast,i=e.avatarStyle,o=e.bubbleStyle,s=e.hideBotAvatar,u=e.hideUserAvatar,c=this.state.loading,l=t.avatar,p=t.user,d=p?!u:!s;return a.a.createElement(X,{className:"rsc-ts ".concat(p?"rsc-ts-user":"rsc-ts-bot"),user:p},a.a.createElement(G,{className:"rsc-ts-image-container",user:p},n&&d&&a.a.createElement($,{className:"rsc-ts-image",style:i,showAvatar:d,user:p,src:l,alt:"avatar"})),a.a.createElement(W,{className:"rsc-ts-bubble",style:o,user:p,showAvatar:d,isFirst:n,isLast:r},c?a.a.createElement(N,null):this.renderMessage()))}}]),t}(r.Component);Y.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Z=Y,ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!0},n.getMessage=function(){var e=n.props,t=e.previousValue,r=e.step.message;return r?r.replace(/{previousValue}/g,t):""},n.renderMessage=function(){var e=n.props,t=e.step,r=e.steps,i=e.previousStep,o=e.triggerNextStep,s=t.component;return s?a.a.cloneElement(s,{step:t,steps:r,previousStep:i,triggerNextStep:o}):n.getMessage()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.step,r=t.speak,a=t.previousValue,i=t.triggerNextStep,o=n.component,s=n.delay,u=n.waitAction,c=o&&u;setTimeout(function(){e.setState({loading:!1},function(){c||n.rendered||i(),r(n,a)})},s)}},{key:"render",value:function(){var e=this.props,t=e.step,n=e.isFirst,r=e.isLast,i=e.avatarStyle,o=e.bubbleStyle,s=e.hideBotAvatar,u=e.hideUserAvatar,c=this.state.loading,l=t.avatar,p=t.user,d=p?!u:!s;return a.a.createElement(X,{className:"rsc-ts ".concat(p?"rsc-ts-user":"rsc-ts-bot"),user:p},a.a.createElement(G,{className:"rsc-ts-image-container",user:p},n&&d&&a.a.createElement($,{className:"rsc-ts-image",style:i,showAvatar:d,user:p,src:l,alt:"avatar"})),a.a.createElement(W,{className:"rsc-ts-bubble",style:o,user:p,showAvatar:d,isFirst:n,isLast:r},c?a.a.createElement(N,null):this.renderMessage()))}}]),t}(r.Component);ee.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var te=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],ne=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],re=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],ae=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],ie=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],oe=n(8),se={parse:function(e){var t=[];if(e.user)t=te;else if(e.message)t=ne;else if(e.options)t=re;else if(e.component)t=ae;else{if(!e.update)throw new Error("The step ".concat(Object(oe.stringify)(e)," is invalid"));t=ie}for(var n=0,r=t.length;n<r;n+=1){var a=t[n],i=a.key,o=a.types,s=a.required;if(!e[i]&&s)throw new Error("Key '".concat(i,"' is required in step ").concat(Object(oe.stringify)(e)));if(e[i]&&"any"!==o[0]&&o.indexOf(typeof e[i])<0)throw new Error("The type of '".concat(i,"' value must be ").concat(o.join(" or ")," instead of ").concat(typeof e[i]))}var u=t.map(function(e){return e.key});for(var i in e)u.indexOf(i)<0&&(console.error("Invalid key '".concat(i,"' in step '").concat(e.id,"'")),delete e[i]);return e},checkInvalidIds:function(e){for(var t in e){var n=e[t],r=e[t].trigger;if("function"!==typeof r)if(n.options)for(var a=n.options.filter(function(e){return"function"!==typeof e.trigger}).map(function(e){return e.trigger}),i=0,o=a.length;i<o;i+=1){var s=a[i];if(s&&!e[s])throw new Error("The id '".concat(s,"' triggered by option ").concat(i+1," in step '").concat(e[t].id,"' does not exist"))}else if(r&&!e[r])throw new Error("The id '".concat(r,"' triggered by step '").concat(e[t].id,"' does not exist"))}}},ue=function(e,t){var n=Object(oe.parse)(Object(oe.stringify)(t));for(var r in n)for(var a=0,i=n[r].length;a<i;a+=1)n[r][a].component&&(n[r][a].component=n[r][a].id);localStorage.setItem(e,Object(oe.stringify)(n))};function ce(){var e=Object(h.a)(["\n  background: ",";\n  border-radius: 10px;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  font-family: ",";\n  overflow: hidden;\n  position: ",";\n  bottom: ",";\n  top: ",";\n  right: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  z-index: 999;\n  transform: ",";\n  transform-origin: ",";\n  transition: transform 0.3s ease;\n\n  @media screen and (max-width: 568px) {\n    border-radius: ",";\n    bottom: 0 !important;\n    left: initial !important;\n    height: 100%;\n    right: 0 !important;\n    top: initial !important;\n    width: 100%;\n  }\n"]);return ce=function(){return e},e}var le=v.default.div(ce(),function(e){return e.theme.background},function(e){return e.theme.fontFamily},function(e){return e.floating?"fixed":"relative"},function(e){var t=e.floating,n=e.floatingStyle;return t?n.bottom||"32px":"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t&&n.top||"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t?n.right||"32px":"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t&&n.left||"initial"},function(e){return e.width},function(e){return e.height},function(e){return e.opened?"scale(1)":"scale(0)"},function(e){return e.floatingStyle.transformOrigin||"bottom right"},function(e){return e.floating?"0":""});le.defaultProps={theme:z};var pe=le;function de(){var e=Object(h.a)(["\n  height: calc("," - ",");\n  overflow-y: scroll;\n  margin-top: 2px;\n  padding-top: 6px;\n\n  @media screen and (max-width: 568px) {\n    height: ",";\n  }\n"]);return de=function(){return e},e}var fe=v.default.div(de(),function(e){return e.height},function(e){return e.hideInput?"56px":"112px"},function(e){return e.floating?"calc(100% - 112px)":""});function ge(){var e=Object(h.a)(["\n  align-items: center;\n  background: ",";\n  color: ",";\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 10px;\n"]);return ge=function(){return e},e}var he=v.default.div(ge(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.theme.headerFontColor});he.defaultProps={theme:z};var ve=he;function be(){var e=Object(h.a)(["\n  margin: 0;\n  font-size: ",";\n"]);return be=function(){return e},e}var me=v.default.h2(be(),function(e){return e.theme.headerFontSize});me.defaultProps={theme:z};var ye=me;function Se(){var e=Object(h.a)(["\n  cursor: pointer;\n"]);return Se=function(){return e},e}var xe=v.default.a(Se());function ke(){var e=Object(h.a)(["\n  align-items: center;\n  cursor: pointer;\n  background: ",";\n  bottom: 32px;\n  border-radius: 100%;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: center;\n  position: fixed;\n  right: 32px;\n  transform: ",";\n  transition: transform 0.3s ease;\n  width: 56px;\n  z-index: 999;\n"]);return ke=function(){return e},e}var we=v.default.a(ke(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.opened?"scale(0)":"scale(1)"});we.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var Oe=we;function je(){var e=Object(h.a)(["\n  height: 24px;\n  width: 24px;\n"]);return je=function(){return e},e}var Ee=v.default.img(je());function Ne(){var e=Object(h.a)(["\n  position: relative;\n"]);return Ne=function(){return e},e}var Ie=v.default.div(Ne());function Ce(){var e=Object(h.a)(["\n          "," .2s ease\n        "]);return Ce=function(){return e},e}function Me(){var e=Object(h.a)(["\n  animation: ",";\n  border: 0;\n  border-radius: 0;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  border-top: ",";\n  box-shadow: ",";\n  box-sizing: border-box;\n  color: ",";\n  font-size: 16px;\n  opacity: ",";\n  outline: none;\n  padding: ",";\n  width: 100%;\n  -webkit-appearance: none;\n\n  &:disabled {\n    background: #fff;\n  }\n\n  @media screen and (max-width: 568px) {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n"]);return Me=function(){return e},e}var qe=v.default.input(Me(),function(e){return e.invalid?Object(v.css)(Ce(),O):""},function(e){return e.invalid?"0":"1px solid #eee"},function(e){return e.invalid?"inset 0 0 2px #E53935":"none"},function(e){return e.invalid?"#E53935":""},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){return e.hasButton?"16px 52px 16px 10px":"16px 10px"},function(e){return e.floating?"0":"10px"},function(e){return e.floating?"0":"10px"});function Be(){var e=Object(h.a)(["\n            "," 2s ease infinite\n          "]);return Be=function(){return e},e}function Ae(){var e=Object(h.a)(["\n  background-color: transparent;\n  border: 0;\n  border-bottom-right-radius: 10px;\n  box-shadow: none;\n  cursor: ",";\n  fill: ",";\n  opacity: ",";\n  outline: none;\n  padding: 14px 16px 12px 16px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  &:before {\n    content: '';\n    position: absolute;\n    width: 23px;\n    height: 23px;\n    border-radius: 50%;\n    animation: ",";\n  }\n  &:not(:disabled):hover {\n    opacity: 0.7;\n  }\n"]);return Ae=function(){return e},e}var ze=v.default.button(Ae(),function(e){return e.disabled?"default":"pointer"},function(e){var t=e.speaking,n=e.invalid,r=e.theme;return t?r.headerBgColor:n?"#E53935":"#4a4a4a"},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){var t,n=e.theme;return e.speaking?Object(v.css)(Be(),(t=n.headerBgColor,Object(v.keyframes)(m(),b(t,.4),b(t,0),b(t,0)))):""});ze.defaultProps={theme:z};var Ve=ze,Fe=null,Pe=function(){},Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";return Object(s.a)(this,e),Fe||(Fe=this),this.state={inputValue:"",lang:a,onChange:t,onEnd:n,onStop:r},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),Fe}return Object(u.a)(e,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),Object(u.a)(e,[{key:"onChange",value:function(e){var t=this.state.onChange;this.setState({inputValue:e}),t(e)}},{key:"onFinal",value:function(e){this.setState({inputValue:e}),this.recognition.stop()}},{key:"onEnd",value:function(){var e=this.state,t=e.onStop,n=e.onEnd,r=e.force;this.setState({speaking:!1}),r?t():n()}},{key:"onResult",value:function(e){for(var t="",n="",r=e.resultIndex;r<e.results.length;r+=1)e.results[r].isFinal?(n+=e.results[r][0].transcript,this.onFinal(n)):(t+=e.results[r][0].transcript,this.onChange(t))}},{key:"setState",value:function(e){this.state=Object.assign({},this.state,e)}},{key:"setup",value:function(){if(!e.isSupported())return this;var t=window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(e){return this.setState({lang:e}),this.setup(),this}},{key:"speak",value:function(){return e.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),e}(),Te=function(){return a.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},De=function(){return a.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Le=function(e){var t=e.size;return a.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 500 500"},a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};Le.defaultProps={size:20};var Ue=Le,He=function(e){var t=e.size;return a.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 400 400"},a.a.createElement("g",null,a.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),a.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};He.defaultProps={size:20};var _e=He,We=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},Ke=function(e){return"string"===typeof e},$e=function(e){return function(t,n){var r=e.lang,a=e.voice,i=e.enable,o=t.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!o&&i){var s=function(e){var t=e.message,n=e.metadata,r=void 0===n?{}:n;return Ke(r.speak)?r.speak:Ke(t)?t:""}(t),u=new window.SpeechSynthesisUtterance;u.text=s.replace(/{previousValue}/g,n),u.lang=r,u.voice=a,window.speechSynthesis.speak(u)}}},Je=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).onNodeInserted=function(e){var t=e.currentTarget;n.props.enableSmoothScroll&&n.supportsScrollBehavior?t.scroll({top:t.scrollHeight,left:0,behavior:"smooth"}):t.scrollTop=t.scrollHeight},n.onResize=function(){n.content.scrollTop=n.content.scrollHeight},n.onRecognitionChange=function(e){n.setState({inputValue:e})},n.onRecognitionEnd=function(){n.setState({speaking:!1}),n.handleSubmitButton()},n.onRecognitionStop=function(){n.setState({speaking:!1})},n.onValueChange=function(e){n.setState({inputValue:e.target.value})},n.getTriggeredStep=function(e,t){var r=n.generateRenderedStepsById();return"function"===typeof e?e({value:t,steps:r}):e},n.getStepMessage=function(e){var t=n.state.previousSteps,r=t.length>0?t.length-1:0,a=n.generateRenderedStepsById(),i=t[r].value;return"function"===typeof e?e({previousValue:i,steps:a}):e},n.generateRenderedStepsById=function(){for(var e=n.state.previousSteps,t={},r=0,a=e.length;r<a;r+=1){var i=e[r],o=i.id,s=i.message,u=i.value,c=i.metadata;t[o]={id:o,message:s,value:u,metadata:c}}return t},n.triggerNextStep=function(e){var t=n.props.enableMobileAutoFocus,r=n.state,a=r.defaultUserSettings,i=r.previousSteps,o=r.renderedSteps,s=r.steps,u=n.state,c=u.currentStep,l=u.previousStep,p=c.end;if(e&&e.value&&(c.value=e.value),e&&e.hideInput&&(c.hideInput=e.hideInput),e&&e.trigger&&(c.trigger=n.getTriggeredStep(e.trigger,e.value)),p)n.handleEnd();else if(c.options&&e){var d=c.options.filter(function(t){return t.value===e.value})[0],f=n.getTriggeredStep(d.trigger,c.value);delete c.options,c=Object.assign({},c,d,a,{user:!0,message:d.label,trigger:f}),o.pop(),i.pop(),o.push(c),i.push(c),n.setState({currentStep:c,renderedSteps:o,previousSteps:i})}else if(c.trigger){c.replace&&o.pop();var h=n.getTriggeredStep(c.trigger,c.value),v=Object.assign({},s[h]);if(v.message)v.message=n.getStepMessage(v.message);else if(v.update){var b=v;if((v=Object.assign({},s[b.update])).options)for(var m=0,y=v.options.length;m<y;m+=1)v.options[m].trigger=b.trigger;else v.trigger=b.trigger}v.key=g()(24),l=c,c=v,n.setState({renderedSteps:o,currentStep:c,previousStep:l},function(){v.user?n.setState({disabled:!1},function(){!t&&We()||n.input&&n.input.focus()}):(o.push(v),i.push(v),n.setState({renderedSteps:o,previousSteps:i}))})}var S=n.props,x=S.cache,k=S.cacheName;x&&setTimeout(function(){ue(k,{currentStep:c,previousStep:l,previousSteps:i,renderedSteps:o})},300)},n.handleEnd=function(){var e=n.props.handleEnd;if(e){for(var t=n.state.previousSteps,r=t.map(function(e){return{id:e.id,message:e.message,value:e.value,metadata:e.metadata}}),a=[],i=0,o=t.length;i<o;i+=1){var s=t[i],u=s.id,c=s.message,l=s.value,p=s.metadata;a[u]={id:u,message:c,value:l,metadata:p}}e({renderedSteps:r,steps:a,values:t.filter(function(e){return e.value}).map(function(e){return e.value})})}},n.isInputValueEmpty=function(){var e=n.state.inputValue;return!e||0===e.length},n.isLastPosition=function(e){var t=n.state.renderedSteps,r=t.length,a=t.map(function(e){return e.key}).indexOf(e.key);if(r<=1||a+1===r)return!0;var i=t[a+1];return!i.message&&!i.asMessage||e.user!==i.user},n.isFirstPosition=function(e){var t=n.state.renderedSteps,r=t.map(function(e){return e.key}).indexOf(e.key);if(0===r)return!0;var a=t[r-1];return!a.message&&!a.asMessage||e.user!==a.user},n.handleKeyPress=function(e){"Enter"===e.key&&n.submitUserMessage()},n.handleSubmitButton=function(){var e=n.state,t=e.speaking,r=e.recognitionEnable;if((n.isInputValueEmpty()||t)&&r)return n.recognition.speak(),void(t||n.setState({speaking:!0}));n.submitUserMessage()},n.submitUserMessage=function(){var e=n.state,t=e.defaultUserSettings,r=e.inputValue,a=e.previousSteps,i=e.renderedSteps,o=n.state.currentStep;if(!(o.validator&&n.checkInvalidInput())){var s={message:r,value:r};o=Object.assign({},t,o,s),i.push(o),a.push(o),n.setState({currentStep:o,renderedSteps:i,previousSteps:a,disabled:!0,inputValue:""},function(){n.input&&n.input.blur()})}},n.checkInvalidInput=function(){var e=n.props.enableMobileAutoFocus,t=n.state,r=t.currentStep,a=t.inputValue,i=r.validator(a),o=a;return("boolean"!==typeof i||!i)&&(n.setState({inputValue:i.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){n.setState({inputValue:o,inputInvalid:!1,disabled:!1},function(){!e&&We()||n.input&&n.input.focus()})},2e3)}),!0)},n.toggleChatBot=function(e){var t=n.props.toggleFloating;t?t({opened:e}):n.setState({opened:e})},n.renderStep=function(e,t){var r=n.state.renderedSteps,i=n.props,o=i.avatarStyle,s=i.bubbleStyle,u=i.bubbleOptionStyle,c=i.customStyle,l=i.hideBotAvatar,p=i.hideUserAvatar,d=i.speechSynthesis,f=e.options,g=e.component,h=e.asMessage,v=n.generateRenderedStepsById(),b=t>0?r[t-1]:{};return g&&!h?a.a.createElement(q,{key:t,speak:n.speak,step:e,steps:v,style:c,previousStep:b,previousValue:b.value,triggerNextStep:n.triggerNextStep}):f?a.a.createElement(U,{key:t,step:e,speak:n.speak,previousValue:b.value,triggerNextStep:n.triggerNextStep,bubbleOptionStyle:u}):a.a.createElement(Z,{key:t,step:e,steps:v,speak:n.speak,previousStep:b,previousValue:b.value,triggerNextStep:n.triggerNextStep,avatarStyle:o,bubbleStyle:s,hideBotAvatar:l,hideUserAvatar:p,speechSynthesis:d,isFirst:n.isFirstPosition(e),isLast:n.isLastPosition(e)})},n.content=null,n.input=null,n.supportsScrollBehavior=!1,n.setContentRef=function(e){n.content=e},n.setInputRef=function(e){n.input=e},n.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:e.opened||!e.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:e.recognitionEnable&&Re.isSupported(),defaultUserSettings:{}},n.speak=$e(e.speechSynthesis),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props.steps,n=this.props,r=n.botDelay,a=n.botAvatar,i=n.cache,o=n.cacheName,s=n.customDelay,u=n.enableMobileAutoFocus,c=n.userAvatar,l={},p={delay:r,avatar:a},d={delay:n.userDelay,avatar:c,hideInput:!1},f={delay:s},g=0,h=t.length;g<h;g+=1){var v=t[g],b={};v.user?b=d:v.message||v.asMessage?b=p:v.component&&(b=f),l[v.id]=Object.assign({},b,se.parse(v))}se.checkInvalidIds(l);var m=t[0];if(m.message){var y=m.message;m.message="function"===typeof y?y():y,l[m.id].message=m.message}var S=this.state.recognitionEnable,x=this.props.recognitionLang;S&&(this.recognition=new Re(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,x)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var k=function(e,t){var n=e.cacheName,r=e.cache,a=e.firstStep,i=e.steps,o=a,s=[i[o.id]],u=[i[o.id]],c=localStorage.getItem(n);if(r&&c)try{var l=Object(oe.parse)(c),p=l.renderedSteps[l.renderedSteps.length-1];if(!p||!p.end){for(var d=0,f=l.renderedSteps.length;d<f;d+=1){var g=l.renderedSteps[d];if(l.renderedSteps[d].delay=0,l.renderedSteps[d].rendered=!0,g.component){var h=g.id;l.renderedSteps[d].component=i[h].component}}var v=l.currentStep,b=v.trigger,m=v.end,y=v.options,S=l.currentStep.id;if(y&&delete l.currentStep.rendered,!b&&!m)if(y)for(var x=0;x<y.length;x+=1)l.currentStep.options[x].trigger=i[S].options[x].trigger;else l.currentStep.trigger=i[S].trigger;return l.currentStep.user&&t(),l}localStorage.removeItem(n)}catch(k){console.info("Unable to parse cache named:".concat(n,". \nThe cache where probably created with an older version of react-simple-chatbot.\n"),k)}return{currentStep:o,previousStep:{},previousSteps:u,renderedSteps:s}}({cacheName:o,cache:i,firstStep:m,steps:l},function(){e.setState({disabled:!1},function(){!u&&We()||e.input&&e.input.focus()})}),w=k.currentStep,O=k.previousStep,j=k.previousSteps,E=k.renderedSteps;this.setState({currentStep:w,defaultUserSettings:d,previousStep:O,previousSteps:j,renderedSteps:E,steps:l})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentStep,r=t.disabled,i=t.inputInvalid,o=t.inputValue,s=t.opened,u=t.renderedSteps,c=t.speaking,l=t.recognitionEnable,p=this.props,d=p.className,f=p.contentStyle,g=p.floating,h=p.floatingIcon,v=p.floatingStyle,b=p.footerStyle,m=p.headerComponent,y=p.headerTitle,S=p.hideHeader,x=p.hideSubmitButton,k=p.inputStyle,w=p.placeholder,O=p.inputAttributes,j=p.recognitionPlaceholder,E=p.style,N=p.submitButtonStyle,I=p.width,C=p.height,M=m||a.a.createElement(ve,{className:"rsc-header"},a.a.createElement(ye,{className:"rsc-header-title"},y),g&&a.a.createElement(xe,{className:"rsc-header-close-button",onClick:function(){return e.toggleChatBot(!1)}},a.a.createElement(De,null))),q=(this.isInputValueEmpty()||c)&&l?a.a.createElement(_e,null):a.a.createElement(Ue,null),B=c?j:n.placeholder||w,A=n.inputAttributes||O;return a.a.createElement("div",{className:"rsc ".concat(d)},g&&a.a.createElement(Oe,{className:"rsc-float-button",style:v,opened:s,onClick:function(){return e.toggleChatBot(!0)}},"string"===typeof h?a.a.createElement(Ee,{src:h}):h),a.a.createElement(pe,{className:"rsc-container",floating:g,floatingStyle:v,opened:s,style:E,width:I,height:C},!S&&M,a.a.createElement(fe,{className:"rsc-content",ref:this.setContentRef,floating:g,style:f,height:C,hideInput:n.hideInput},u.map(this.renderStep)),a.a.createElement(Ie,{className:"rsc-footer",style:b},!n.hideInput&&a.a.createElement(qe,Object.assign({type:"textarea",style:k,ref:this.setInputRef,className:"rsc-input",placeholder:i?"":B,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:o,floating:g,invalid:i,disabled:r,hasButton:!x},A)),!n.hideInput&&!x&&a.a.createElement(Ve,{className:"rsc-submit-button",style:N,onClick:this.handleSubmitButton,invalid:i,disabled:r,speaking:c},q))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.opened;return void 0!==e.toggleFloating&&void 0!==n&&n!==t.opened?Object(d.a)({},t,{opened:n}):t}}]),t}(r.Component);Je.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:a.a.createElement(Te,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var Ge=Je,Qe=n(10),Xe=n(18),Ye=new(function(){function e(){Object(s.a)(this,e),this._data=[]}return Object(u.a)(e,[{key:"add",value:function(e){this._data.push(e)}},{key:"get",value:function(e){return this._data.find(function(t){return t.id===e})}}]),e}());Object.freeze(Ye);var Ze=Ye,et=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,result:"",trigger:!1},n.triggetNext=n.triggetNext.bind(Object(Qe.a)(n)),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.steps;console.log(t);var n=t.user.value;fetch("http://jiangenhe.com:8001/?query=".concat(n).concat(Ze.get("SESSION_ID")?"&sessionId=".concat(Ze.get("SESSION_ID").value):""),{mode:"cors"}).then(function(e){return console.log(e),e.json()}).then(function(t){console.log(t),Ze.get("SESSION_ID")||t.sessionId&&Ze.add({id:"SESSION_ID",value:t.sessionId}),t.fulfillmentText?e.setState({loading:!1,result:t.fulfillmentText}):e.setState({loading:!1,result:"Not found."})})}},{key:"componentDidMount",value:function(){this.triggetNext()}},{key:"triggetNext",value:function(){var e=this;this.setState({trigger:!0},function(){e.props.triggerNextStep()})}},{key:"render",value:function(){var e=this.state,t=(e.trigger,e.loading),n=e.result;return a.a.createElement("div",null,t?a.a.createElement(Xe.Loading,null):n)}}]),t}(r.Component),tt=[{id:"welcome",message:"Welcome, order coffee?",trigger:"user"},{id:"user",user:!0,trigger:"dialog-flow"},{id:"dialog-flow",component:a.a.createElement(et,null),waitAction:!0,trigger:"user",asMessage:!0}],nt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:{width:"350px",margin:"40px auto"}},a.a.createElement(Ge,{steps:tt}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.8d2c2704.chunk.js.map